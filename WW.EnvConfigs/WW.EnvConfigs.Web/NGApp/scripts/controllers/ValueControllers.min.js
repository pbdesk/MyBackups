var EditValuesController=function(n,t,i,r){n.isBusy=!1;n.data=i.Values;n.sortField=["BuildId","Locale.ShortName"];i.IsReady()==!1&&(n.isBusy=!0,i.GetValues(t.Id).then(function(){},function(){alert("Error")}).then(function(){n.isBusy=!1}));n.Refresh=function(){n.isBusy=!0;i.GetValues(t.Id).then(function(){},function(){alert("Error")}).then(function(){n.isBusy=!1})};n.SortByBuild=function(){n.sortField=["BuildId","Locale.ShortName"]};n.SortByLocale=function(){n.sortField=["Locale.ShortName","BuildId"]};n.Save=function(){};n.Clear=function(n){i.ClearValue(n)};n.Revert=function(n){i.RevertValue(n)};n.RevertAll=function(){i.RevertAllValues()};n.ApplyValueToAllLocalesForSameEnv=function(n,t,r){var u=confirm('Value "'+n+'" will be applied to all keys for Build: '+r+". Confirm?");u==!0&&i.ApplyValueToAllLocalesForSameEnv(n,t)};n.ApplyValueToAllBuildsForSameLocale=function(n,t,r){var u=confirm('Value "'+n+'" will be applied to all keys for Locale: '+r+". Confirm?");u==!0&&i.ApplyValueToAllBuildsForSameLocale(n,t)};n.ApplyValueToAll=function(n){var t=confirm('Value "'+n+'" will be applied to all keys for All Builds and all Locales. Confirm?');t==!0&&i.ApplyValueToAll(n)};n.UpdateValue=function(t){r.IsObjectDirty(t)===!0?(n.isBusy=!0,i.UpdateValue(t).then(function(){r.MakeObjectClean(t);toastr.success("Update Successed")},function(){toastr.error("Error in update")}).then(function(){n.isBusy=!1})):toastr.info("No Changes to save")};n.UpdateAll=function(){n.isBusy=!0;var t=$.grep(n.data,function(n){return r.IsObjectDirty(n)===!0});t!=null&&t.length>0?i.UpdateAll(t).then(function(n){toastr.success(n+" of "+t.length+" Records Updated.")},function(){toastr.error("Error occured while saving/updating.")}).then(function(){n.isBusy=!1}):(toastr.info("No Changes to save"),n.isBusy=!1)};n.changed=function(n){r.MakeObjectDirty(n)}};EditValuesController.$inject=["$scope","$routeParams","KeyValueFactory","DirtyFactory"];